{% load static %}
{% load nav_tags %}
<head>
  <script src="{% static 'js/navbar.js' %}"></script>

<link rel="stylesheet" href="{% static 'css/navbar.css' %}">

<link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>

  <nav id="sidebar">
    <ul>
      <li>
        <span class="logo">SCyazilim</span>
        
        <button onclick=toggleSidebar() id="toggle-btn">
          <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#e8eaed"><path d="m313-480 155 156q11 11 11.5 27.5T468-268q-11 11-28 11t-28-11L228-452q-6-6-8.5-13t-2.5-15q0-8 2.5-15t8.5-13l184-184q11-11 27.5-11.5T468-692q11 11 11 28t-11 28L313-480Zm264 0 155 156q11 11 11.5 27.5T732-268q-11 11-28 11t-28-11L492-452q-6-6-8.5-13t-2.5-15q0-8 2.5-15t8.5-13l184-184q11-11 27.5-11.5T732-692q11 11 11 28t-11 28L577-480Z"/></svg>
        </button>
        
      </li>
      <small class="version">version 1.2801</small>
      <style>
        .version{
          font-weight: bold;
          color:grey;
        }
      </style>
      <li>
        <a>
            <i class='bx bxs-user' style="font-size: 24px;"></i>
            <span>{{request.user.username}}</span>
        </a>
        <li class="{% active_class 'admin_dashboard' %}">
          <a href="{% url 'admin_dashboard' company_code %}">
            <i class="fa-solid fa-user"></i>
            <span>Yönetici Paneli</span>
          </a>
        </li>
      <li class="{% active_class 'company_dashboard' %}">
        <a href="{% url 'company_dashboard' company_code %}">
          <i class="fa-solid fa-gear"></i>
          <span>Ayarlar</span>
        </a>
      </li>
      <li class="{% active_class 'inventory' %}">
        <a href="{% url 'inventory' company_code %}">
            <i class='bx bxs-package' style="font-size: 24px;"></i>
            <span>Envanter</span>
        </a>
    </li>
    
    {% if is_master %}
    <li class="{% active_class 'companies' %}">
      <a href="{% url 'companies'%}">
          <i class='bx bxs-component' style="font-size: 24px;"></i>
          <span>Şirketler</span>
      </a>
  </li>
{% endif %}

      
      
      
      <li>
        <button onclick=toggleSubMenu(this) class="dropdown-btn">
          <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#e8eaed"><path d="M160-160q-33 0-56.5-23.5T80-240v-480q0-33 23.5-56.5T160-800h207q16 0 30.5 6t25.5 17l57 57h320q33 0 56.5 23.5T880-640v400q0 33-23.5 56.5T800-160H160Zm0-80h640v-400H447l-80-80H160v480Zm0 0v-480 480Zm400-160v40q0 17 11.5 28.5T600-320q17 0 28.5-11.5T640-360v-40h40q17 0 28.5-11.5T720-440q0-17-11.5-28.5T680-480h-40v-40q0-17-11.5-28.5T600-560q-17 0-28.5 11.5T560-520v40h-40q-17 0-28.5 11.5T480-440q0 17 11.5 28.5T520-400h40Z"/></svg>
          <span>Oluştur</span>
          <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#e8eaed"><path d="M480-361q-8 0-15-2.5t-13-8.5L268-556q-11-11-11-28t11-28q11-11 28-11t28 11l156 156 156-156q11-11 28-11t28 11q11 11 11 28t-11 28L508-372q-6 6-13 8.5t-15 2.5Z"/></svg>
        </button>
        <ul class="sub-menu">
          <div>
            <li><a href="{% url 'product_page' company_code %}">Ürün</a></li>
            <li><a href="{% url 'manage_entities' company_code %}">Kategori / Marka / Model</a></li>
            {% comment %} <li><a href="{% url 'email_update_config' request.user.id company.code %}">Mail Ayarları</a></li> {% endcomment %}
            
            {% if request.user.company.code == MASTER_COMPANY %}
            <li><a href="{% url 'create_user' company_code %}">Kullanıcı</a></li>
            {% endif %}

            <li><a href="#">Departman</a></li>
            <li><a href="#">Ürün</a></li>
          </div>
        </ul>
      </li>
      <li>
        <button onclick=toggleSubMenu(this) class="dropdown-btn">
          <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#e8eaed"><path d="m221-313 142-142q12-12 28-11.5t28 12.5q11 12 11 28t-11 28L250-228q-12 12-28 12t-28-12l-86-86q-11-11-11-28t11-28q11-11 28-11t28 11l57 57Zm0-320 142-142q12-12 28-11.5t28 12.5q11 12 11 28t-11 28L250-548q-12 12-28 12t-28-12l-86-86q-11-11-11-28t11-28q11-11 28-11t28 11l57 57Zm339 353q-17 0-28.5-11.5T520-320q0-17 11.5-28.5T560-360h280q17 0 28.5 11.5T880-320q0 17-11.5 28.5T840-280H560Zm0-320q-17 0-28.5-11.5T520-640q0-17 11.5-28.5T560-680h280q17 0 28.5 11.5T880-640q0 17-11.5 28.5T840-600H560Z"/></svg>
          <span>Zimmetler</span>
          <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#e8eaed"><path d="M480-361q-8 0-15-2.5t-13-8.5L268-556q-11-11-11-28t11-28q11-11 28-11t28 11l156 156 156-156q11-11 28-11t28 11q11 11 11 28t-11 28L508-372q-6 6-13 8.5t-15 2.5Z"/></svg>
        </button>
        <ul class="sub-menu">
          <div>
            <li>
              <a href="{% url 'asset_assignment_view' company_code %}">
                <i class='bx bx-package'></i>
                <span>Zimmet</span>
              </a>
            </li>
            <li>
              <a href="{% url 'assignments' company_code %}">
                <i class='bx bx-receipt'></i>
                  <span>Zimmetler</span>
              </a>
            </li>
            <li>
              <a href="{% url 'undo_assignments' company_code %}">
                <i class='bx bx-rotate-left'></i>
                  <span>Geri Al</span>
              </a>
            </li>
            <li><a href="#">Gardening</a></li>
            <li><a href="#">School</a></li>
          </div>
        </ul>
      </li>
      <li>
        <button onclick=toggleSubMenu(this) class="dropdown-btn">
          <i class='bx bx-list-ol'></i>
            <span>Listele</span>
          <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#e8eaed"><path d="M480-361q-8 0-15-2.5t-13-8.5L268-556q-11-11-11-28t11-28q11-11 28-11t28 11l156 156 156-156q11-11 28-11t28 11q11 11 11 28t-11 28L508-372q-6 6-13 8.5t-15 2.5Z"/></svg>
        </button>
        <ul class="sub-menu">
          <div>
            <li><a href="{% url 'list_users' company_code %}">Kullanıcı</a></li>
            <li><a href="{% url 'list_categories' company_code %}">Kategoriler</a></li>
            <li><a href="#">Markalar</a></li>
            <li><a href="#">Modeller</a></li>
            <li><a href="#">School</a></li>
          </div>
        </ul>
      </li>
      <li>
        <button onclick=toggleSubMenu(this) class="dropdown-btn">
          <i class="fa-solid fa-chart-simple" style="font-size:24px;"></i>
                    <span>Raporlar</span>
          <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#e8eaed"><path d="M480-361q-8 0-15-2.5t-13-8.5L268-556q-11-11-11-28t11-28q11-11 28-11t28 11l156 156 156-156q11-11 28-11t28 11q11 11 11 28t-11 28L508-372q-6 6-13 8.5t-15 2.5Z"/></svg>
        </button>
        <ul class="sub-menu">
          <div>
            <li><a href="{% url 'user_based_asset' company_code %}">Kullanıcı Bazlı Zimmet</a></li>
            <li><a href="{% url 'manage_entities' company_code %}">Kategori / Marka / Model</a></li>
            {% comment %} <li><a href="{% url 'email_update_config' request.user.id company.code %}">Mail Ayarları</a></li> {% endcomment %}
            <li><a href="#">Departman</a></li>
            <li><a href="#">Ürün</a></li>
          </div>
        </ul>
      </li>
      <li>
        <a href="{% url 'logout' %}">
          <i class='bx bx-log-out-circle'></i>
          <span>Çıkış Yap</span>
        </a>
      </li>
    </ul>
  </nav>
</body>
</html>


<script>
  const toggleButton = document.getElementById('toggle-btn')
const sidebar = document.getElementById('sidebar')

function toggleSidebar(){
  sidebar.classList.toggle('close')
  toggleButton.classList.toggle('rotate')

  closeAllSubMenus()
}

function toggleSubMenu(button){

  if(!button.nextElementSibling.classList.contains('show')){
    closeAllSubMenus()
  }

  button.nextElementSibling.classList.toggle('show')
  button.classList.toggle('rotate')

  if(sidebar.classList.contains('close')){
    sidebar.classList.toggle('close')
    toggleButton.classList.toggle('rotate')
  }
}

function closeAllSubMenus(){
  Array.from(sidebar.getElementsByClassName('show')).forEach(ul => {
    ul.classList.remove('show')
    ul.previousElementSibling.classList.remove('rotate')
  })
}

</script>
